{% extends "../../admin/layout.njk" %}

{% block content %}

   <main class="admin">

      <section>
            
         <div class="title">
            <strong>Receita: {{ recipe.title }}</strong>
            <a href="/admin/recipe/{{ recipe.id }}/edit">Editar receita</a>
         </div>
         

         <div class="recipe">
            
            <div class="gallery">
               <div class="highlight">
                  {% if not files[0] %}
                     <img src="http://placehold.it/500x500?text=PRODUTO SEM FOTO" />
                  {% else %}
                     <img 
                        src="{{files[0].src}}"
                        alt="Imagem de {{recipe.title}}"
                        onclick="Lightbox.open()"
                     />
                  {% endif %}

                  <div class="lightbox-target">
                     <img src="{{files[0].src}}" alt="{{files[0].name}}">
                     <a
                        class="lightbox-close"
                        onclick="Lightbox.close()"
                     >
                        <i class="material-icons">close</i>
                     </a>
                  </div>
               </div>

               <div class="gallery-preview">
                  {% for image in files %}
                     <img 
                        src="{{image.src}}"
                        alt="{{image.name}}"
                        {% if loop.index0 == 0 %}class="active"{% endif %}
                        onclick="ImageGallery.setImage(event)"
                     />
                  {% endfor %}
               </div>
            </div>

            <div class="recipe__title">
               <p>{{ recipe.title }}</p>
            </div>

            <div class="recipe__author">
               <p>por {{ recipe.chef_name }}</p>
            </div>

            <div class="recipe_details">

               <section>
                  <div class="detail_title">
                     <h1>Ingredientes</h1>
                  </div>

                  <div class="detail_content">
                     <ul>
                        {% for ingredient in recipe.ingredients %}
                           <li>{{ ingredient }}</li>
                        {% endfor %}
                     </ul>
                  </div>
               </section>

               <section>
                  <div class="detail_title">
                     <h1>Modo de preparo</h1>
                  </div>

                  <div class="detail_content">
                     <ul>
                        {% for step in recipe.preparation %}
                           <li>{{ step }}</li>
                        {% endfor %}
                     </ul>
                  </div>
               </section>

               <section>
                  <div class="detail_title">
                     <h1>Informações adicionais</h1>
                  </div>

                  <div class="detail_content">
                     <p class="information">
                        {% if recipe.information == '' %}Sem informações adicionais{% endif %}
                        {{ recipe.information | striptags(true) | escape | nl2br}}
                     </p>
                  </div>
               </section>

            </div>

         </div>

      </section>

   </main>

{% endblock content %}

{% block scripts %}   
{% endblock scripts %}